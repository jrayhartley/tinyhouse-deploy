{"version":3,"sources":["lib/graphql/mutations/ConnectStripe/index.ts","lib/graphql/mutations/CreateBooking/index.ts","lib/graphql/mutations/DisconnectStripe/index.ts","lib/graphql/mutations/HostListing/index.ts","lib/graphql/mutations/LogIn/index.ts","lib/graphql/mutations/LogOut/index.ts","lib/graphql/globalTypes.ts","lib/utils/index.ts","sections/AppHeader/components/MenuItems/index.tsx","sections/AppHeader/index.tsx","sections/AppHeader/assets/tinyhouse-logo.png","sections/Home/assets/toronto.jpg","sections/Home/assets/dubai.jpg","sections/Home/assets/los-angeles.jpg","sections/Home/assets/london.jpg","sections/Home/components/HomeHero/index.tsx","lib/components/AppHeaderSkeleton/index.tsx","lib/components/AppHeaderSkeleton/assets/tinyhouse-logo.png","lib/components/ErrorBanner/index.tsx","lib/components/ListingCard/index.tsx","lib/components/PageSkeleton/index.tsx","sections/Home/components/HomeListings/index.tsx","sections/Home/components/HomeListingsSkeleton/index.tsx","sections/Home/assets/listing-loading-card-cover.png","sections/Home/assets/map-background.jpg","sections/Home/assets/san-francisco.jpg","sections/Home/assets/cancun.jpg","lib/graphql/queries/AuthUrl/index.ts","lib/graphql/queries/Listing/index.ts","lib/graphql/queries/Listings/index.ts","lib/graphql/queries/User/index.ts","sections/Home/index.tsx","sections/Host/index.tsx","sections/Listing/components/ListingBookings/index.tsx","sections/Listing/components/ListingCreateBooking/index.tsx","sections/Listing/components/ListingCreateBookingModal/index.tsx","sections/Listing/components/ListingDetails/index.tsx","sections/Listing/index.tsx","sections/Listings/components/ListingsFilters/index.tsx","sections/Listings/components/ListingsPagination/index.tsx","sections/Listings/components/ListingsSkeleton/index.tsx","sections/Listings/assets/listing-loading-card-cover.png","sections/Listings/index.tsx","sections/NotFound/index.tsx","sections/Login/index.tsx","sections/Login/assets/google_logo.png","sections/Stripe/index.tsx","sections/User/components/UserBookings/index.tsx","sections/User/components/UserListings/index.tsx","sections/User/components/UserProfile/index.tsx","sections/User/index.tsx","reportWebVitals.ts","index.tsx"],"names":["CONNECT_STRIPE","gql","CREATE_BOOKING","DISCONNECT_STRIPE","HOST_LISTING","LOG_IN","ListingType","ListingsFilter","LOG_OUT","iconColor","formatListingPrice","price","round","Math","displaySuccessNotification","message","description","notification","placement","style","marginTop","displayErrorMessage","error","Item","Menu","SubMenu","MenuItems","viewer","setViewer","useMutation","onCompleted","data","logOut","sessionStorage","removeItem","onError","logout","subMenuLogin","id","avatar","title","src","to","UserOutlined","onClick","LogoutOutlined","type","mode","selectable","className","HomeOutlined","Header","Layout","Search","Input","AppHeader","withRouter","location","history","useState","search","setSearch","useEffect","pathname","pathnameSubStrings","split","includes","length","alt","placeholder","enterButton","value","onChange","e","target","onSearch","trimmedValue","trim","push","Title","Typography","HomeHero","size","gutter","xs","md","cover","torontoImage","dubaiImage","losAngelesImage","londonImage","AppHeaderSkeleton","ErrorBanner","banner","closable","Text","ListingCard","listing","image","address","numOfGuests","hoverable","backgroundImage","level","strong","ellipsis","color","PageSkeleton","skeletonParagraph","active","paragraph","rows","HomeListings","listings","grid","column","sm","lg","dataSource","renderItem","HomeListingsSkeleton","loading","AUTH_URL","LISTING","LISTINGS","USER","Content","Paragraph","Home","useQuery","variables","filter","PRICE_HIGH_TO_LOW","limit","page","mapBackground","result","sanFranciscoImage","cancunImage","Form","Host","imageLoading","setImageLoading","imageBase64Value","setImageBase64Value","hostListing","handleHostListing","values","a","fullAddress","city","state","postalCode","input","hasWallet","layout","onFinish","onFinishFailed","label","name","rules","required","Group","Button","APARTMENT","BankOutlined","HOUSE","min","extra","maxLength","TextArea","listType","showUploadList","action","beforeUpload","beforeImageUpload","info","file","status","originFileObj","getBase64Value","LoadingOutlined","PlusOutlined","htmlType","fileIsValidImage","fileIsValidSize","img","callback","reader","FileReader","readAsDataURL","onload","ListingBookings","listingBookings","bookingsPage","setBookingsPage","total","listingBookingsList","undefined","locale","emptyText","pagination","current","defaultPageSize","hideOnSinglePage","showLessItems","listingBooking","bookingHistory","checkIn","checkOut","tenant","shape","ListingCreateBooking","host","bookingsIndex","checkInDate","checkOutDate","setCheckInDate","setCheckOutDate","setModalVisible","bookingsIndexJSON","JSON","parse","viewerIsHost","CheckInInputDisabled","checkOutInputDisabled","buttonDisabled","buttonMessage","format","showToday","disabled","disabledDate","currentDate","isBefore","moment","endOf","year","month","day","date","Boolean","dateIsBooked","dateValue","onOpenChange","selectedCheckOutDate","isSameOrBefore","dateCursor","add","verifyAndSetCheckOutDate","mark","WrappedListingCreateBookingModal","injectStripe","modalVisible","clearBookingData","handleListingRefetch","stripe","createBooking","daysBooked","diff","listingPrice","handleCreateBooking","createToken","stripeToken","token","source","visible","centered","footer","onCancel","KeyOutlined","hidePostalCode","ListingDetails","EnvironmentOutlined","expandable","Listing","match","params","refetch","bookings","listingDetailsElement","listingBookingsElement","listingCreateBookingElement","listingCreateBookingModalElement","justify","Option","Select","ListingsFilters","setFilter","PRICE_LOW_TO_HIGH","ListingsPagination","setPage","ListingsSkeleton","Listings","locationRef","useRef","skip","listingsRegion","region","listinsSectionElement","offsetTop","listingsRegionElement","NotFound","Login","client","useApolloClient","logIn","setItem","logInData","logInLoading","logInError","logInRef","code","URL","window","href","searchParams","get","handleAuthorize","query","authUrl","tip","viewerId","logInErrorBannerElement","role","aria-label","Stripe","connectStripe","connectStripeRef","replace","UserBookings","userBookings","userBookingsList","position","userBooking","UserListings","userListings","listingsPage","setListingsPage","userListingsList","userListing","stripeAuthUrl","process","UserProfile","user","viewerIsUser","handleUserRefetch","disconnectStripe","additionalDetails","income","rel","additionalDetailsSection","contact","User","stripeErrorBanner","userProfileElement","userListingsElement","userBookingsElement","typeof","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ApolloClient","uri","request","operation","getItem","setContext","headers","initialViewer","didRequest","App","apiKey","exact","path","component","render","props","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.02388408.chunk.js","sourcesContent":["import { gql } from 'apollo-boost';\r\n\r\nexport const CONNECT_STRIPE = gql`\r\n    mutation ConnectStripe($input: ConnectStripeInput!) {\r\n        connectStripe(input: $input) {\r\n            hasWallet\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const CREATE_BOOKING = gql`\r\n    mutation CreateBooking($input: CreateBookingInput!) {\r\n        createBooking(input: $input) {\r\n            id\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const DISCONNECT_STRIPE = gql`\r\n    mutation DisconnectStripe {\r\n        disconnectStripe {\r\n            hasWallet\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const HOST_LISTING = gql`\r\n    mutation HostListing($input: HostListingInput!) {\r\n        hostListing(input: $input) {\r\n            id\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const LOG_IN =  gql`\r\n    mutation LogIn($input: LogInInput) {\r\n        logIn(input: $input) {\r\n            id\r\n            token\r\n            avatar\r\n            hasWallet\r\n            didRequest\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const LOG_OUT =  gql`\r\n    mutation LogOut {\r\n        logOut {\r\n            id\r\n            token\r\n            avatar\r\n            hasWallet\r\n            didRequest\r\n        }\r\n    }\r\n`;","/* tslint:disable */\n/* eslint-disable */\n// @generated\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum ListingType {\n  APARTMENT = \"APARTMENT\",\n  HOUSE = \"HOUSE\",\n}\n\nexport enum ListingsFilter {\n  PRICE_HIGH_TO_LOW = \"PRICE_HIGH_TO_LOW\",\n  PRICE_LOW_TO_HIGH = \"PRICE_LOW_TO_HIGH\",\n}\n\nexport interface ConnectStripeInput {\n  code: string;\n}\n\nexport interface CreateBookingInput {\n  id: string;\n  source: string;\n  checkIn: string;\n  checkOut: string;\n}\n\nexport interface HostListingInput {\n  title: string;\n  description: string;\n  image: string;\n  type: ListingType;\n  address: string;\n  price: number;\n  numOfGuests: number;\n}\n\nexport interface LogInInput {\n  code: string;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================\n","import { message, notification } from \"antd\";\r\n\r\nexport const iconColor = \"#1890ff\";\r\n\r\nexport const formatListingPrice = (price: number, round = true) => {\r\n  const formatListingPrice = round ? Math.round(price / 100) : price / 100 ;\r\n  return `$${formatListingPrice}`;\r\n};\r\n\r\nexport const displaySuccessNotification = (\r\n  message: string,\r\n  description?: string\r\n) => {\r\n  return notification[\"success\"]({\r\n    message,\r\n    description,\r\n    placement: \"topLeft\",\r\n    style: {\r\n      marginTop: 50\r\n    }\r\n  });\r\n};\r\n\r\nexport const displayErrorMessage = (error: string) => {\r\n  return message.error(error);\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { Avatar, Button, Menu } from 'antd';\r\nimport { HomeOutlined, LogoutOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { LOG_OUT } from '../../../../lib/graphql/mutations';\r\nimport { LogOut as LogOutData } from '../../../../lib/graphql/mutations/LogOut/__generated__/LogOut';\r\nimport { displaySuccessNotification, displayErrorMessage } from '../../../../lib/utils';\r\nimport { Viewer } from '../../../../lib/types';\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n    setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\nconst { Item, SubMenu } = Menu;\r\n\r\nexport const MenuItems = ({viewer, setViewer}: Props) => {\r\n    const [logout] = useMutation<LogOutData>(LOG_OUT, {\r\n        onCompleted: data => {\r\n            if (data && data.logOut) {\r\n                setViewer(data.logOut);\r\n                sessionStorage.removeItem(\"token\");\r\n                displaySuccessNotification(\"You've successfully logged out!\");\r\n            }\r\n        },\r\n        onError: () => {\r\n            displayErrorMessage(\"Sorry! We weren't able to log you out. Please try again later!\");\r\n        }\r\n    });\r\n\r\n    const handleLogOut = () => {\r\n        logout();\r\n    };\r\n\r\n    const subMenuLogin = viewer.id && viewer.avatar ? (\r\n        <SubMenu title={<Avatar src={viewer.avatar} />}>\r\n            <Item key=\"/user\">\r\n                <Link to={`/user/${viewer.id}`}>\r\n                    <UserOutlined />\r\n                 Profile\r\n                </Link>\r\n            </Item>\r\n            <Item key=\"/logout\">\r\n                <div onClick={handleLogOut}>\r\n                    <LogoutOutlined />\r\n                    Log Out\r\n                </div>\r\n            </Item>\r\n        </SubMenu>\r\n    ) : (\r\n        <Item>\r\n            <Link to=\"/login\">\r\n                <Button type=\"primary\">Sign In</Button>\r\n            </Link>\r\n        </Item>\r\n    );\r\n\r\n    return (\r\n        <Menu mode=\"horizontal\" selectable={false} className=\"menu\">\r\n            <Item key=\"/host\">\r\n                <Link to=\"/host\">\r\n                    <HomeOutlined />\r\n                    Host\r\n                </Link>\r\n            </Item>\r\n            {subMenuLogin}\r\n        </Menu>\r\n    );\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport { Link, withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport { Input, Layout } from \"antd\";\r\nimport { MenuItems } from './components/MenuItems';\r\nimport { Viewer } from '../../lib/types';\r\n\r\nimport logo from \"./assets/tinyhouse-logo.png\";\r\nimport { displayErrorMessage } from \"../../lib/utils\";\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n    setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\nconst { Header } = Layout;\r\nconst { Search } = Input;\r\n\r\nexport const AppHeader = withRouter(\r\n  ({viewer, setViewer, location, history}: Props & RouteComponentProps) => {\r\n    const [search, setSearch] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n      const { pathname } = location;\r\n      const pathnameSubStrings = pathname.split(\"/\");\r\n\r\n      if (!pathname.includes(\"/listings\")) {\r\n        setSearch(\"\");\r\n      }\r\n\r\n      if(pathname.includes(\"/listings\") && pathnameSubStrings.length === 3) {\r\n        setSearch(pathnameSubStrings[2]);\r\n        return;\r\n      }\r\n    }, [location]);\r\n\r\n    const onSearch = (value: string) => {\r\n      const trimmedValue = value.trim();\r\n\r\n      if (trimmedValue) {\r\n        history.push(`/listings/${trimmedValue}`);\r\n      } else {\r\n        displayErrorMessage(\"Please enter a valid search!\");\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Header className=\"app-header\">\r\n        <div className=\"app-header__logo-search-section\">\r\n          <div className=\"app-header__logo\">\r\n            <Link to=\"/\">\r\n              <img src={logo} alt=\"App logo\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"app-header__search-input\">\r\n            <Search\r\n              placeholder=\"Search 'San Francisco'\"\r\n              enterButton\r\n              value={search}\r\n              onChange={e => setSearch(e.target.value)}\r\n              onSearch={onSearch}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"app-header__menu-section\">\r\n            <MenuItems viewer={viewer} setViewer={setViewer} />\r\n        </div>\r\n      </Header>\r\n    );\r\n  }\r\n);","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABICAYAAACp+JiNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKtSURBVHgB7ZvPcdNAFMa/ZTjkhm/JLaYDUgFJBeAKCBUgVUCowKICSAemAlyCO8hySgwXc0ouZPn22WLEv4xs7W5g5vvNOJpV5Iz10763Ty+yO2hCQDrmV5U7QWb4mS+4GSMN/gEEJAGSYEgCJMGQBEiCIQmQBEMSIAmGJEASDEmAJBiSAEkwJAGSYEgCJMGQBEiCIQmQBOMh0jI+mIZTZIb/Mhs5pCO5BDi8Q2ZSCogoHCAJhiRAEgxJgCQYkgBJMCQBkmBIAiTBkARIgnGfEuZsDLz8FnAUtxx73BOp+wm9cAH1Ze2azq4FmzFz5zBlw+Q5ClN+JvCq/yLAuKqdv+bv2DCZoTDFJPAKr/jjhCf7/m/HrGq3uqzchDPlLQpSSoK/XQuY9zmYM6WisDcoRAkJPs6AL7VbbPMmCjsrJSKrBMb3YhMCHjsQRXAGTSyUMpJPQsD59QABLZ9rN4uhhIxLaBYJgYmNJ38aEx0SYKGUUUR6CYzjZUxsibEZlUlEUgmxCLKEloko4oYVZoi5JiFJJGxqgD8WQamJIbas3FHKWiJF2RxrgEmfJXA0DaM9btrxDc8pnhRL5nH3uD7JNNYSfN+KS9BrDGToTNiqBqCAhh/6on1xvM4dDh+7+3lyx33+Xgw9JuEaAxkiwSPBEjgUJuHG7kQHJMydJbj1MujxDxBn4u2AGbFzTggOr/abcEgZXzu7/V03SDGBus4V61SCHlsQn4HYPKMwYvgccteY4yfYEaevCcMXbarYUywOT9sxp/CHWBbvT0PDhsqjHwey4CoZaqU7S8d8vWgHTEifuJlRwDP8fGXPUbDdpkYrJMEoGg6sEKu9gLPO2FaHeNfpOpUkCneei0rY3Fr/dnu9LHDPcRcKB0iCIQmQBEMSEFeHgMf431j3GpPxHWSq7xBvwxLFAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/toronto.5c221cf7.jpg\";","export default __webpack_public_path__ + \"static/media/dubai.a6c56bca.jpg\";","export default __webpack_public_path__ + \"static/media/los-angeles.44220702.jpg\";","export default __webpack_public_path__ + \"static/media/london.16fb9b9d.jpg\";","import React from 'react';\r\nimport { Card, Col, Input, Row, Typography } from 'antd';\r\n\r\nimport torontoImage from '../../assets/toronto.jpg';\r\nimport dubaiImage from '../../assets/dubai.jpg';\r\nimport losAngelesImage from '../../assets/los-angeles.jpg';\r\nimport londonImage from '../../assets/london.jpg';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst { Title } = Typography;\r\nconst { Search } = Input;\r\n\r\ninterface Props {\r\n    onSearch: (value: string) => void;\r\n}\r\n\r\nexport const HomeHero = ({onSearch}: Props) => {\r\n    return (\r\n        <div className=\"home-hero\">\r\n            <div className=\"heome-hero__search\">\r\n                <Title className=\"home-hero__title\">Find a place you'll love to stay at</Title>\r\n                <Search \r\n                    placeholder=\"Search 'San Francisco'\"\r\n                    size=\"large\"\r\n                    enterButton\r\n                    className=\"home-hero__search-input\"\r\n                    onSearch={onSearch}\r\n                />\r\n            </div>\r\n            <Row gutter={12} className=\"home-hero__cards\">\r\n                <Col xs={12} md={6}>\r\n                    <Link to=\"/listings/toronto\">\r\n                        <Card cover={<img alt=\"Toronto\" src={torontoImage} />}>Toronto</Card>\r\n                    </Link>\r\n                </Col>\r\n                <Col xs={12} md={6}>\r\n                    <Link to=\"/listings/dubai\">\r\n                        <Card cover={<img alt=\"Dubai\" src={dubaiImage} />}>Dubai</Card>\r\n                    </Link>\r\n                </Col>\r\n                <Col xs={0} md={6}>\r\n                    <Link to=\"/listings/los%20angeles\">\r\n                        <Card cover={<img alt=\"Los Angeles\" src={losAngelesImage} />}>Los Angeles</Card>\r\n                    </Link>\r\n                </Col>\r\n                <Col xs={0} md={6}>\r\n                    <Link to=\"/listings/london\">\r\n                        <Card cover={<img alt=\"London\" src={londonImage} />}>London</Card>\r\n                    </Link>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    );\r\n};","import React from \"react\";\r\nimport { Layout } from \"antd\";\r\n\r\nimport logo from \"./assets/tinyhouse-logo.png\";\r\n\r\nconst { Header } = Layout;\r\n\r\nexport const AppHeaderSkeleton = () => {\r\n  return (\r\n    <Header className=\"app-header\">\r\n      <div className=\"app-header__logo-search-section\">\r\n        <div className=\"app-header__logo\">\r\n            <img src={logo} alt=\"App logo\" />\r\n        </div>\r\n      </div>\r\n    </Header>\r\n  );\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABICAYAAACp+JiNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKtSURBVHgB7ZvPcdNAFMa/ZTjkhm/JLaYDUgFJBeAKCBUgVUCowKICSAemAlyCO8hySgwXc0ouZPn22WLEv4xs7W5g5vvNOJpV5Iz10763Ty+yO2hCQDrmV5U7QWb4mS+4GSMN/gEEJAGSYEgCJMGQBEiCIQmQBEMSIAmGJEASDEmAJBiSAEkwJAGSYEgCJMGQBEiCIQmQBOMh0jI+mIZTZIb/Mhs5pCO5BDi8Q2ZSCogoHCAJhiRAEgxJgCQYkgBJMCQBkmBIAiTBkARIgnGfEuZsDLz8FnAUtxx73BOp+wm9cAH1Ze2azq4FmzFz5zBlw+Q5ClN+JvCq/yLAuKqdv+bv2DCZoTDFJPAKr/jjhCf7/m/HrGq3uqzchDPlLQpSSoK/XQuY9zmYM6WisDcoRAkJPs6AL7VbbPMmCjsrJSKrBMb3YhMCHjsQRXAGTSyUMpJPQsD59QABLZ9rN4uhhIxLaBYJgYmNJ38aEx0SYKGUUUR6CYzjZUxsibEZlUlEUgmxCLKEloko4oYVZoi5JiFJJGxqgD8WQamJIbas3FHKWiJF2RxrgEmfJXA0DaM9btrxDc8pnhRL5nH3uD7JNNYSfN+KS9BrDGToTNiqBqCAhh/6on1xvM4dDh+7+3lyx33+Xgw9JuEaAxkiwSPBEjgUJuHG7kQHJMydJbj1MujxDxBn4u2AGbFzTggOr/abcEgZXzu7/V03SDGBus4V61SCHlsQn4HYPKMwYvgccteY4yfYEaevCcMXbarYUywOT9sxp/CHWBbvT0PDhsqjHwey4CoZaqU7S8d8vWgHTEifuJlRwDP8fGXPUbDdpkYrJMEoGg6sEKu9gLPO2FaHeNfpOpUkCneei0rY3Fr/dnu9LHDPcRcKB0iCIQmQBEMSEFeHgMf431j3GpPxHWSq7xBvwxLFAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { Alert } from 'antd';\r\n\r\ninterface Props {\r\n    message?: string;\r\n    description?: string;\r\n}\r\n\r\nexport const ErrorBanner = ({\r\n    message = \"Uh oh! Something went wrong :(\",\r\n    description = \"Looks like something went wrong. Please check your connection and/or try again later.\"\r\n}: Props) => {\r\n    return (\r\n        <Alert\r\n            banner\r\n            closable\r\n            message={message}\r\n            description={description}\r\n            type=\"error\"\r\n            className=\"error-banner\"\r\n        />\r\n    );\r\n};","import React from 'react';\r\nimport { Card, Typography } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { formatListingPrice, iconColor } from '../../utils';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface Props {\r\n    listing: {\r\n        id: string;\r\n        title: string;\r\n        image: string;\r\n        address: string;\r\n        price: number;\r\n        numOfGuests: number;\r\n    };\r\n}\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nexport const ListingCard = ({ listing }: Props) => {\r\n    const { id, title, image, address, price, numOfGuests } = listing;\r\n\r\n    return (\r\n        <Link to={`/listing/${id}`}>\r\n          <Card\r\n        hoverable\r\n        cover={\r\n          <div\r\n            style={{ backgroundImage: `url(${image})` }}\r\n            className=\"listing-card__cover-img\"\r\n          />\r\n        }\r\n      >\r\n        <div className=\"listing-card__details\">\r\n          <div className=\"listing-card__description\">\r\n            <Title level={4} className=\"listing-card__price\">\r\n              {formatListingPrice(price)}\r\n              <span>/day</span>\r\n            </Title>\r\n            <Text strong ellipsis className=\"listing-card__title\">\r\n              {title}\r\n            </Text>\r\n            <Text ellipsis className=\"listing-card__address\">\r\n              {address}\r\n            </Text>\r\n          </div>\r\n          <div className=\"listing-card__dimensions listing-card__dimensions--guests\">\r\n          <UserOutlined style={{ color: iconColor }} />\r\n            <Text> {numOfGuests} guests</Text>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </Link>\r\n    );\r\n}","import React, { Fragment } from 'react';\r\nimport { Skeleton } from 'antd';\r\n\r\nexport const PageSkeleton = () => {\r\n    const skeletonParagraph = (\r\n        <Skeleton active paragraph={{ rows: 4}} className=\"page-skeleton__paragraph\" />\r\n    );\r\n\r\n    return (\r\n        <Fragment>\r\n            {skeletonParagraph}\r\n            {skeletonParagraph}\r\n            {skeletonParagraph}\r\n        </Fragment>\r\n    );\r\n};","import React from 'react';\r\nimport { List, Typography } from 'antd';\r\nimport { ListingCard } from '../../../../lib/components';\r\nimport { Listings } from '../../../../lib/graphql/queries/Listings/__generated__/Listings';\r\n\r\ninterface Props {\r\n    title: string;\r\n    listings: Listings[\"listings\"][\"result\"];\r\n}\r\n\r\nconst { Title } = Typography;\r\n\r\nexport const HomeListings = ({ title, listings }: Props) => {\r\n    return (\r\n        <div className=\"home-listings\">\r\n            <Title level={4} className=\"home-listings__title\">\r\n                {title}\r\n            </Title>\r\n            <List\r\n                grid={{\r\n                    gutter: 8,\r\n                    column: 4,\r\n                    xs: 1,\r\n                    sm: 2,\r\n                    lg: 4\r\n                }}\r\n                dataSource={listings}\r\n                renderItem={listing => (\r\n                    <List.Item>\r\n                        <ListingCard listing={listing} />\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        </div>\r\n    );\r\n};","import React from \"react\";\r\nimport { Card, List, Skeleton } from \"antd\";\r\n\r\nimport listingLoadingCardCover from \"../../assets/listing-loading-card-cover.png\";\r\n\r\nexport const HomeListingsSkeleton = () => {\r\n  const emptyData = [{}, {}, {}, {}];\r\n\r\n  return (\r\n    <div className=\"home-listings-skeleton\">\r\n      <Skeleton paragraph={{ rows: 0 }} />\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          column: 4,\r\n          xs: 1,\r\n          sm: 2,\r\n          lg: 4\r\n        }}\r\n        dataSource={emptyData}\r\n        renderItem={() => (\r\n          <List.Item>\r\n            <Card\r\n              cover={\r\n                <div\r\n                  style={{ backgroundImage: `url(${listingLoadingCardCover})` }}\r\n                  className=\"home-listings-skeleton__card-cover-img\"\r\n                ></div>\r\n              }\r\n              loading\r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAGsCAYAAACiiX3NAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAABcgSURBVHgB7daxDYAwEARBm9yI/qtEUIARdex8BzuX/BiOAAECBAgQIEAgJzD/4vt5d65cMAECBAgQIEAgKnCdax7RdtkECBAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAAECBAgQIECAAAECBFoCH+giB1TBDI5HAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/map-background.c8201cdd.jpg\";","export default __webpack_public_path__ + \"static/media/san-francisco.bc8599ab.jpg\";","export default __webpack_public_path__ + \"static/media/cancun.7009e472.jpg\";","import { gql } from 'apollo-boost';\r\n\r\nexport const AUTH_URL =  gql`\r\n    query AuthUrl {\r\n        authUrl\r\n    }\r\n`;","import { gql } from \"apollo-boost\";\r\n\r\nexport const LISTING = gql`\r\n    query Listing($id: ID!, $bookingsPage: Int!, $limit: Int!) {\r\n        listing(id: $id) {\r\n            id\r\n            title\r\n            description\r\n            image\r\n            host {\r\n                id\r\n                name\r\n                avatar\r\n                hasWallet\r\n            }\r\n            type\r\n            address\r\n            city\r\n            bookings(limit: $limit, page: $bookingsPage) {\r\n                total\r\n                result {\r\n                    id\r\n                    tenant {\r\n                        id\r\n                        name\r\n                        avatar\r\n                    }\r\n                    checkIn\r\n                    checkOut\r\n                }\r\n            }\r\n            bookingsIndex\r\n            price\r\n            numOfGuests\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const LISTINGS = gql`\r\n    query Listings($location: String, $filter: ListingsFilter!, $limit: Int!, $page: Int!) {\r\n        listings(location: $location, filter: $filter, limit: $limit, page: $page) {\r\n            region\r\n            total\r\n            result {\r\n                id\r\n                title\r\n                image\r\n                address\r\n                price\r\n                numOfGuests\r\n            }\r\n        }\r\n    }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const USER = gql`\r\n  query User($id: ID!, $bookingsPage: Int!, $listingsPage: Int!, $limit: Int!) {\r\n    user(id: $id) {\r\n      id\r\n      name\r\n      avatar\r\n      contact\r\n      hasWallet\r\n      income\r\n      bookings(limit: $limit, page: $bookingsPage) {\r\n        total\r\n        result {\r\n          id\r\n          listing {\r\n            id\r\n            title\r\n            image\r\n            address\r\n            price\r\n            numOfGuests\r\n          }\r\n          checkIn\r\n          checkOut\r\n        }\r\n      }\r\n      listings(limit: $limit, page: $listingsPage) {\r\n        total\r\n        result {\r\n          id\r\n          title\r\n          image\r\n          address\r\n          price\r\n          numOfGuests\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;","import React from 'react';\r\nimport { Button, Col, Layout, Row, Typography } from 'antd';\r\nimport { HomeHero, HomeListings, HomeListingsSkeleton } from './components';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { displayErrorMessage } from '../../lib/utils';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { Listings as ListingsData, ListingsVariables } from '../../lib/graphql/queries/Listings/__generated__/Listings';\r\nimport { ListingsFilter } from '../../lib/graphql/globalTypes';\r\n\r\nimport mapBackground from './assets/map-background.jpg';\r\nimport sanFranciscoImage from './assets/san-francisco.jpg';\r\nimport cancunImage from './assets/cancun.jpg';\r\nimport { LISTINGS } from '../../lib/graphql/queries';\r\n\r\nconst { Content } = Layout;\r\nconst { Paragraph, Title } = Typography;\r\n\r\nconst PAGE_LIMIT = 4;\r\nconst PAGE_NUMBER = 1;\r\n\r\nexport const Home = ({ history }: RouteComponentProps) => {\r\n    const { loading, data } = useQuery<ListingsData, ListingsVariables>(LISTINGS, {\r\n        variables: {\r\n            filter: ListingsFilter.PRICE_HIGH_TO_LOW,\r\n            limit: PAGE_LIMIT,\r\n            page: PAGE_NUMBER\r\n        }\r\n    });\r\n    \r\n    const onSearch = (value: string) => {\r\n        const trimmedValue = value.trim();\r\n\r\n        if (trimmedValue) {\r\n            history.push(`/listings/${trimmedValue}`);\r\n        } else {\r\n            displayErrorMessage(\"Please enter a valid search!\");\r\n        }\r\n    };\r\n\r\n    const renderListingsSection = () => {\r\n        if (loading) {\r\n            return (\r\n                <HomeListingsSkeleton />\r\n            );\r\n        }\r\n\r\n        if (data) {\r\n            return <HomeListings title=\"Premium Listings\" listings={data.listings.result} />;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <Content className=\"home\" style={{ backgroundImage: `url(${mapBackground})` }}>\r\n            <HomeHero onSearch={onSearch} />\r\n\r\n            <div className=\"home__cta-section\">\r\n                <Title level={2} className=\"home__cta-section-title\">\r\n                    Your guide for all things rental\r\n                </Title>\r\n                <Paragraph>\r\n                    Helping you make the best decisions in renting your last minute locations.\r\n                </Paragraph>\r\n                <Link to=\"/listings/united%20states\">\r\n                    <Button className=\"home__cta-section-button\" type=\"primary\" size=\"large\">Popular listings in the United States</Button>\r\n                </Link>\r\n            </div>\r\n\r\n            {renderListingsSection()}\r\n\r\n            <div className=\"home__listings\">\r\n                <Title level={4} className=\"home__listings-title\">\r\n                    Listings of any kind\r\n                </Title>\r\n                <Row gutter={12}>\r\n                    <Col xs={24} sm={12}>\r\n                        <Link to=\"/listings/san%20francisco\">\r\n                            <div className=\"home__listings-img-cover\">\r\n                                <img src={sanFranciscoImage} alt=\"San Francisco\" className=\"home__listings-img\" />\r\n                            </div>\r\n                        </Link>\r\n                    </Col>\r\n                    <Col xs={24} sm={12}>\r\n                        <Link to=\"/listings/cancn\">\r\n                            <div className=\"home__listings-img-cover\">\r\n                                <img src={cancunImage} alt=\"Cancn\" className=\"home__listings-img\" />\r\n                            </div>\r\n                        </Link>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        </Content>\r\n    );\r\n};","import React, { useState } from 'react';\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { Button, Form, Input, InputNumber, Layout, Radio, Typography, Upload } from 'antd';\r\nimport { BankOutlined, HomeOutlined, LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { Viewer } from '../../lib/types';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { HOST_LISTING } from '../../lib/graphql/mutations';\r\nimport { HostListing as HostListingData, HostListingVariables } from '../../lib/graphql/mutations/HostListing/__generated__/HostListing';\r\nimport { ListingType } from '../../lib/graphql/globalTypes';\r\nimport { displayErrorMessage, displaySuccessNotification, iconColor } from '../../lib/utils';\r\nimport { UploadChangeParam } from 'antd/lib/upload';\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst { Text, Title } = Typography;\r\nconst { Item } = Form;\r\n\r\nexport const Host = ({ viewer }: Props) => {\r\n    const [imageLoading, setImageLoading] = useState(false);\r\n    const [imageBase64Value, setImageBase64Value] = useState<string>(\"\");\r\n\r\n    const [hostListing, { loading, data }] = useMutation<HostListingData, HostListingVariables>(\r\n        HOST_LISTING,\r\n        {\r\n            onCompleted: () => {\r\n                displaySuccessNotification(\"You've successfully created your listing!\");\r\n            },\r\n            onError: () => {\r\n                displayErrorMessage(\"Sorry! We weren't able to create your listing. Please try again later.\");\r\n            }\r\n        }\r\n    );\r\n\r\n    const handleImageUpload = (info: UploadChangeParam) => {\r\n        const { file } = info;\r\n\r\n        if (file.status === \"uploading\") {\r\n            setImageLoading(true);\r\n            return;\r\n        }\r\n\r\n        if (file.status === \"done\" && file.originFileObj) {\r\n            getBase64Value(file.originFileObj, imageBase64Value => {\r\n                setImageBase64Value(imageBase64Value);\r\n                setImageLoading(false);\r\n            });\r\n        }\r\n    };\r\n\r\n    interface FormValues {\r\n        address: string;\r\n        city?: string;\r\n        state?: string;\r\n        postalCode?: string;\r\n        type: ListingType;\r\n        numOfGuests: number;\r\n        title: string;\r\n        description: string;\r\n        price: number;\r\n        image: string;\r\n    }\r\n\r\n    const handleHostListing = async (values: FormValues) => {\r\n        const fullAddress = `${values.address}, ${values.city}, ${values.state}, ${values.postalCode}`;\r\n        const input = {\r\n            ...values,\r\n            address: fullAddress,\r\n            image: imageBase64Value,\r\n            price: values.price * 100\r\n        };\r\n        delete input.city;\r\n        delete input.state;\r\n        delete input.postalCode;\r\n\r\n        hostListing({\r\n            variables: {\r\n                input\r\n            }\r\n        });\r\n    };\r\n\r\n    const onFinishFailed = () => {\r\n        displayErrorMessage(\"Please complete all required form fields!\");\r\n    };\r\n\r\n    if (!viewer.id || !viewer.hasWallet) {\r\n        return (\r\n            <Content className=\"host-content\">\r\n                <div className=\"host__form-header\">\r\n                    <Title level={4} className=\"host__form-title\">\r\n                        You have to sign in and connect with Stripe to host a listing!\r\n                    </Title>\r\n                    <Text type=\"secondary\">\r\n                        We only allow users who've signed in to our application and have connected with Stripe to host new listings. You can sign in at the{\" \"} \r\n                        <Link to=\"/login\">login</Link> page and connect with Stripe.\r\n                    </Text>\r\n                </div>\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <Content className=\"host-content\">\r\n                <div className=\"host__form-header\">\r\n                    <Title level={3} className=\"host__form-title\">\r\n                        Please wait!\r\n                    </Title>\r\n                    <Text type=\"secondary\">We're creating your listing now.</Text>\r\n                </div>\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    if (data && data.hostListing) {\r\n        return <Redirect to={`/listing/${data.hostListing.id}`} />;\r\n    }\r\n\r\n    return (\r\n        <Content className=\"host-content\">\r\n            <Form layout=\"vertical\" onFinish={handleHostListing} onFinishFailed={onFinishFailed}>\r\n                <div className=\"host__form-header\">\r\n                    <Title className=\"host__form-title\">\r\n                        Hi! Let's get started listing your place.\r\n                    </Title>\r\n                    <Text type=\"secondary\">\r\n                        In this form, we'll collect some basic and additional information about your listing.\r\n                    </Text>\r\n                </div>\r\n\r\n                <Item label=\"Home Type\" name=\"type\" rules={[{ required: true, message: \"Please select a home type!\" }]}>\r\n                    <Radio.Group>\r\n                        <Radio.Button value={ListingType.APARTMENT}>\r\n                            <BankOutlined style={{ color: iconColor }} /> <span>Apartment</span>\r\n                        </Radio.Button>\r\n                        <Radio.Button value={ListingType.HOUSE}>\r\n                            <HomeOutlined style={{ color: iconColor }} /> <span>House</span>\r\n                        </Radio.Button>\r\n                    </Radio.Group>\r\n                </Item>\r\n\r\n                <Item label=\"Max # of Guests\" name=\"numOfGuests\" rules={[{ required: true, message: \"Please select a max number of guests!\" }]}>\r\n                    <InputNumber min={1} placeholder=\"4\" />\r\n                </Item>\r\n\r\n                <Item label=\"Title\" extra=\"Max xharacter count of 45\" name=\"title\" rules={[{ required: true, message: \"Please enter a title for your listing!\" }]}>\r\n                    <Input maxLength={45} placeholder=\"The Iconic and Luxurious Bel-Air Mansion\" />\r\n                </Item>\r\n\r\n                <Item label=\"Description of listing\" extra=\"Max character count of 400\" name=\"description\" rules={[{ required: true, message: \"Please enter a description for your listing!\" }]}>\r\n                    <Input.TextArea\r\n                        rows={3}\r\n                        maxLength={400}\r\n                        placeholder=\"Modern, clean, and iconic home of the Fresh Prince. Situated in the heart of Bel-Air, Los Angeles.\"\r\n                    />\r\n                </Item>\r\n\r\n                <Item label=\"Address\" name=\"address\" rules={[{ required: true, message: \"Please enter an address for your listing!\" }]}>\r\n                    <Input placeholder=\"251 North Bristol Avenue\" />\r\n                </Item>\r\n\r\n                <Item label=\"City/Town\" name=\"city\" rules={[{ required: true, message: \"Please enter a city for your listing!\" }]}>\r\n                    <Input placeholder=\"Los Angeles\" />\r\n                </Item>\r\n\r\n                <Item label=\"State/Province\" name=\"state\" rules={[{ required: true, message: \"Please enter a state for your listing!\" }]}>\r\n                    <Input placeholder=\"California\" />\r\n                </Item>\r\n\r\n                <Item label=\"Zip/Postal Code\" name=\"postalCode\" rules={[{ required: true, message: \"Please enter a zip (or postal) code for your listing!\" }]}>\r\n                    <Input placeholder=\"90077\" />\r\n                </Item>\r\n\r\n                <Item label=\"Image\" extra=\"Images have to be under 1MB in size and of type JPG or PNG\" name=\"image\" rules={[{ required: true, message: \"Please upload an image for your listing!\" }]}>\r\n                    <div className=\"host__form-image-upload\">\r\n                        <Upload\r\n                            name=\"image\"\r\n                            listType=\"picture-card\"\r\n                            showUploadList={false}\r\n                            action=\"https://run.mocky.io/v3/aee48262-25c7-4f35-a7a7-887505e59957\"\r\n                            beforeUpload={beforeImageUpload}\r\n                            onChange={handleImageUpload}\r\n                        >\r\n                            {imageBase64Value ? (\r\n                                <img src={imageBase64Value} alt=\"Listing\" />\r\n                            ) : (\r\n                                <div>\r\n                                    {imageLoading ? <LoadingOutlined /> : <PlusOutlined />}\r\n                                    <div className=\"ant-upload-text\">Upload</div>\r\n                                </div>\r\n                            )}\r\n                        </Upload>\r\n                    </div>\r\n                </Item>\r\n\r\n                <Item label=\"Price\" extra=\"All prices in $USD/day\" name=\"price\" rules={[{ required: true, message: \"Please enter a price for your listing!\" }]}>\r\n                    <InputNumber min={0} placeholder=\"120\" />\r\n                </Item>\r\n\r\n                <Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\">Submit</Button>\r\n                </Item>\r\n            </Form>\r\n        </Content>\r\n    );\r\n};\r\n\r\nconst beforeImageUpload = (file: File) => {\r\n    const fileIsValidImage = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n    const fileIsValidSize = file.size / 1024 / 1024 < 1;\r\n\r\n    if (!fileIsValidImage) {\r\n        displayErrorMessage(\"You're only able to upload valid JPG or PNG files!\");\r\n        return false;\r\n    }\r\n\r\n    if (!fileIsValidSize) {\r\n        displayErrorMessage(\"You're only able to upload image files of under 1MB in size!\");\r\n        return false;\r\n    }\r\n\r\n    return fileIsValidImage && fileIsValidSize;\r\n};\r\n\r\nconst getBase64Value = (\r\n    img: File | Blob,\r\n    callback: (imageBase64Value: string) => void\r\n) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(img);\r\n    reader.onload = () => {\r\n        callback(reader.result as string);\r\n    };\r\n};","import React from 'react';\r\nimport { Avatar, Divider, List, Typography } from 'antd';\r\nimport { Listing } from '../../../../lib/graphql/queries/Listing/__generated__/Listing';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface Props {\r\n    listingBookings: Listing[\"listing\"][\"bookings\"];\r\n    bookingsPage: number;\r\n    limit: number;\r\n    setBookingsPage: (page: number) => void;\r\n}\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nexport const ListingBookings = ({\r\n    listingBookings, \r\n    bookingsPage, \r\n    limit, \r\n    setBookingsPage\r\n}: Props) => {\r\n    const total = listingBookings ? listingBookings.total : null;\r\n    const result = listingBookings ? listingBookings.result : null;\r\n\r\n    const listingBookingsList = listingBookings ? (\r\n        <List\r\n          grid={{\r\n            gutter: 20,\r\n            xs: 1,\r\n            sm: 2,\r\n            lg: 3\r\n          }}\r\n          dataSource={result ? result : undefined}\r\n          locale={{ emptyText: \"No bookings have been made yet!\" }}\r\n          pagination={{\r\n            current: bookingsPage,\r\n            total: total ? total : undefined,\r\n            defaultPageSize: limit,\r\n            hideOnSinglePage: true,\r\n            showLessItems: true,\r\n            onChange: (page: number) => setBookingsPage(page)\r\n          }}\r\n          renderItem={listingBooking => {\r\n              const bookingHistory = (\r\n                <div className=\"listing-bookings__history\">\r\n                    <div>\r\n                        Check in: <Text strong>{listingBooking.checkIn}</Text>\r\n                    </div>\r\n                    <div>\r\n                        Check out: <Text strong>{listingBooking.checkOut}</Text>\r\n                    </div>\r\n                </div>\r\n              );\r\n\r\n            return (\r\n                <List.Item>\r\n                    {bookingHistory}\r\n                    <Link to={`/user/${listingBooking.tenant.id}`}>\r\n                        <Avatar src={listingBooking.tenant.avatar} size={64} shape=\"square\" />\r\n                    </Link>\r\n                </List.Item>\r\n            );\r\n            \r\n          }}\r\n        />\r\n    ) : null;\r\n\r\n    const listingBookingsElement = listingBookingsList ? (\r\n        <div className=\"listing-bookings\">\r\n            <Divider />\r\n            <div className=\"listing-bookings__section\">\r\n                <Title level={4} className=\"listing-bookings__title\">\r\n                    Bookings\r\n                </Title>\r\n            </div>\r\n            {listingBookingsList}\r\n        </div>\r\n    ) : null;\r\n\r\n    return listingBookingsElement;\r\n};","import React from 'react';\r\nimport { Button, Card, DatePicker, Divider, Typography } from 'antd';\r\nimport { Listing as ListingData } from '../../../../lib/graphql/queries/Listing/__generated__/Listing'; \r\nimport { displayErrorMessage, formatListingPrice } from '../../../../lib/utils';\r\nimport moment, { Moment } from 'moment';\r\nimport { Viewer } from '../../../../lib/types';\r\nimport { BookingsIndex } from './types';\r\n\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n    host: ListingData[\"listing\"][\"host\"];\r\n    price: number;\r\n    bookingsIndex: ListingData[\"listing\"][\"bookingsIndex\"];\r\n    checkInDate: Moment | null;\r\n    checkOutDate: Moment | null;\r\n    setCheckInDate: (checkInDate: Moment | null) => void;\r\n    setCheckOutDate: (checkOutDate: Moment | null) => void;\r\n    setModalVisible: (setModalVisible: boolean) => void;\r\n}\r\n\r\nexport const ListingCreateBooking = ({ viewer, host, price, bookingsIndex, checkInDate, checkOutDate, setCheckInDate, setCheckOutDate, setModalVisible }: Props) => {\r\n    const bookingsIndexJSON: BookingsIndex = JSON.parse(bookingsIndex);\r\n\r\n    const dateIsBooked = (currentDate: Moment) => {\r\n        const year = moment(currentDate).year();\r\n        const month = moment(currentDate).month();\r\n        const day = moment(currentDate).date();\r\n\r\n        if (bookingsIndexJSON[year] && bookingsIndexJSON[year][month]) {\r\n            return Boolean(bookingsIndexJSON[year][month][day]);\r\n        } else { \r\n            return false;\r\n        }\r\n    };\r\n    \r\n    const disabledDate = (currentDate?: Moment) => {\r\n        if (currentDate) {\r\n            const dateIsBeforeEndOfDay = currentDate.isBefore(moment().endOf('day'));\r\n\r\n            return dateIsBeforeEndOfDay || dateIsBooked(currentDate);\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const disabledCheckOutDate = (currentDate?: Moment) => {\r\n        if (currentDate) {\r\n            const dateIsBeforeCheckInDate = currentDate.isBefore(moment(checkInDate).endOf('day'));\r\n\r\n            return dateIsBeforeCheckInDate;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const verifyAndSetCheckOutDate = (selectedCheckOutDate: Moment | null) => {\r\n        if (checkInDate && selectedCheckOutDate) {\r\n            if (moment(selectedCheckOutDate).isSameOrBefore(checkInDate, \"days\")) {\r\n                return displayErrorMessage(\r\n                    `You must choose a checkout date after your check in!`\r\n                );\r\n            }\r\n\r\n            let dateCursor = checkInDate;\r\n            while (moment(dateCursor).isBefore(selectedCheckOutDate, \"days\")) {\r\n                dateCursor = moment(dateCursor).add(1, \"days\");\r\n\r\n                const year = moment(dateCursor).year();\r\n                const month = moment(dateCursor).month();\r\n                const day = moment(dateCursor).date();\r\n\r\n                if (\r\n                    bookingsIndexJSON[year] &&\r\n                    bookingsIndexJSON[year][month] &&\r\n                    bookingsIndexJSON[year][month][day]\r\n                ) {\r\n                    return displayErrorMessage(\"You can't book a period of time that overlaps existing bookings. Please try again!\");\r\n                }\r\n            }\r\n        }\r\n\r\n        setCheckOutDate(selectedCheckOutDate);\r\n    };\r\n\r\n    const viewerIsHost = viewer.id === host.id;\r\n    const CheckInInputDisabled = !viewer.id || viewerIsHost || !host.hasWallet;\r\n    const checkOutInputDisabled = CheckInInputDisabled || !checkInDate;\r\n    const buttonDisabled = CheckInInputDisabled || !checkInDate || !checkOutDate;\r\n\r\n    let buttonMessage = \"You won't be charged yet\";\r\n    if (!viewer.id) {\r\n        buttonMessage = \"You must be signed in to book a listing!\";\r\n    } else if (viewerIsHost) {\r\n        buttonMessage = \"You can't book your own listing!\";\r\n    } else if (!host.hasWallet) {\r\n        buttonMessage = \"This Listing has been disabled\";\r\n    }\r\n\r\n    return (\r\n        <div className=\"listing-booking\">\r\n            <Card className=\"listing-booking__card\">\r\n                <div>\r\n                    <Paragraph>\r\n                        <Title level={2} className=\"listing-booking__card-title\">\r\n                            {formatListingPrice(price)}\r\n                            <span>/day</span>\r\n                        </Title>\r\n                    </Paragraph>\r\n                    <Divider />\r\n                    <div className=\"listing-booking__card-date-picker\">\r\n                        <Paragraph strong>Check In</Paragraph>\r\n                        <DatePicker \r\n                            value={checkInDate ? checkInDate : undefined}\r\n                            format={'YYYY/MM/DD'}\r\n                            showToday={false}\r\n                            disabled={CheckInInputDisabled}\r\n                            disabledDate={disabledDate}\r\n                            onChange={dateValue => setCheckInDate(dateValue)}\r\n                            onOpenChange={() => setCheckOutDate(null)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"listing-booking__card-date-picker\">\r\n                        <Paragraph strong>Check Out</Paragraph>\r\n                        <DatePicker \r\n                            value={checkOutDate ? checkOutDate : undefined}\r\n                            format={'YYYY/MM/DD'}\r\n                            showToday={false}\r\n                            disabled={checkOutInputDisabled}\r\n                            disabledDate={disabledCheckOutDate}\r\n                            onChange={dateValue => verifyAndSetCheckOutDate(dateValue)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n                <Button \r\n                    disabled={buttonDisabled} \r\n                    size=\"large\" \r\n                    type=\"primary\" \r\n                    className=\"listing-booking__card-cta\"\r\n                    onClick={() => setModalVisible(true)}\r\n                >\r\n                    Request to book!\r\n                </Button>\r\n                <Text mark type=\"secondary\">{buttonMessage}</Text>\r\n            </Card>\r\n        </div>\r\n    );\r\n};","import React from \"react\";\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { CardElement, injectStripe, ReactStripeElements } from 'react-stripe-elements';\r\nimport { Button, Divider, Modal, Typography } from \"antd\";\r\nimport { KeyOutlined } from \"@ant-design/icons\";\r\nimport moment, { Moment } from \"moment\";\r\nimport { CreateBooking as CreateBookingData, CreateBookingVariables } from '../../../../lib/graphql/mutations/CreateBooking/__generated__/CreateBooking';\r\nimport { formatListingPrice, displaySuccessNotification, displayErrorMessage } from \"../../../../lib/utils\";\r\nimport { CREATE_BOOKING } from \"../../../../lib/graphql/mutations\";\r\n\r\ninterface Props {\r\n    id: string;\r\n    price: number;\r\n    checkInDate: Moment;\r\n    checkOutDate: Moment;\r\n    modalVisible: boolean;\r\n    setModalVisible: (modalVisible: boolean) => void;\r\n    clearBookingData: () => void;\r\n    handleListingRefetch: () => Promise<void>;\r\n}\r\n\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nexport const ListingCreateBookingModal = ({\r\n    id,\r\n    price, \r\n    checkInDate, \r\n    checkOutDate, \r\n    modalVisible, \r\n    setModalVisible ,\r\n    clearBookingData,\r\n    handleListingRefetch,\r\n    stripe\r\n}: Props & ReactStripeElements.InjectedStripeProps) => {\r\n\r\n    const [createBooking, { loading }] = useMutation<\r\n        CreateBookingData, \r\n        CreateBookingVariables\r\n    >(CREATE_BOOKING, {\r\n        onCompleted: () => {\r\n            clearBookingData();\r\n            displaySuccessNotification(\r\n                \"You've successfully booked this listing!\",\r\n                \"Booking history can always be found on your User page.\"\r\n            );\r\n            handleListingRefetch();\r\n        },\r\n        onError: () => {\r\n            displayErrorMessage(\"Sorry! We weren't able to successfully book this listing. Please try again later.\");\r\n        }\r\n    });\r\n\r\n    const daysBooked = checkOutDate.diff(checkInDate, \"days\") + 1;\r\n    const listingPrice = price * daysBooked;\r\n\r\n    const handleCreateBooking = async () => {\r\n        if (!stripe) {\r\n            return displayErrorMessage(\"Sorry! We weren't able to connect with Stripe.\");\r\n        }\r\n\r\n        let { token: stripeToken, error } = await stripe.createToken();\r\n        if (stripeToken) {\r\n            createBooking({\r\n                variables: {\r\n                    input: {\r\n                        id,\r\n                        source: stripeToken.id,\r\n                        checkIn: moment(checkInDate).format(\"YYYY-MM-DD\"),\r\n                        checkOut: moment(checkOutDate).format(\"YYYY-MM-DD\")\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            displayErrorMessage(error && error.message ? error.message : \"Sorry! We weren't able to book the listing. Please try again later.\");\r\n        }\r\n    };\r\n\r\n  return (\r\n    <Modal\r\n      visible={modalVisible}\r\n      centered\r\n      footer={null}\r\n      onCancel={() => setModalVisible(false)}\r\n    >\r\n        <div className=\"listing-booking-modal\">\r\n            <div className=\"listing-booking-modal__intro\">\r\n                <Title className=\"listing-booking-modal__intro-title\">\r\n                    <KeyOutlined />\r\n                </Title>\r\n                <Title level={3} className=\"listing-booking-modal__intro-title\">\r\n                    Book Your Trip\r\n                </Title>\r\n                <Paragraph>\r\n                    Enter your payment information to book the listing from the dates between {\" \"}\r\n                    <Text mark strong>\r\n                        {moment(checkInDate).format(\"MMMM Do YYYY\")}\r\n                    </Text>\r\n                    {\" \"}and{\" \"}\r\n                    <Text mark strong>\r\n                        {moment(checkOutDate).format(\"MMMM Do YYYY\")}\r\n                    </Text>\r\n                    , inclusive.\r\n                </Paragraph>\r\n            </div>\r\n\r\n            <Divider />\r\n\r\n            <div className=\"listing-booking-modal__charge-summary\">\r\n                <Paragraph>\r\n                    {formatListingPrice(price, false)} * {daysBooked} days ={\" \"}\r\n                    <Text strong>\r\n                        {formatListingPrice(listingPrice, false)}\r\n                    </Text>\r\n                </Paragraph>\r\n                <Paragraph className=\"listing-booking-modal__charge-summary-total\">\r\n                    Total ={\" \"}\r\n                    <Text mark strong>\r\n                        {formatListingPrice(listingPrice, false)}\r\n                    </Text>\r\n                </Paragraph>\r\n            </div>\r\n\r\n            <Divider />\r\n\r\n            <div className=\"listing-booking-modal__stripe-card-section\">\r\n                <CardElement hidePostalCode className=\"listing-booking-modal__stripe-card\" />\r\n                <Button \r\n                    size=\"large\" \r\n                    type=\"primary\" \r\n                    className=\"listing-booking-modal__cta\"\r\n                    loading={loading}\r\n                    onClick={handleCreateBooking}\r\n                >\r\n                    Book\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport const WrappedListingCreateBookingModal = injectStripe(ListingCreateBookingModal);","import React from 'react';\r\nimport { Avatar, Divider, Tag, Typography } from 'antd';\r\nimport { EnvironmentOutlined } from '@ant-design/icons';\r\nimport { Listing as ListingData } from '../../../../lib/graphql/queries/Listing/__generated__/Listing';\r\nimport { iconColor } from '../../../../lib/utils';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface Props {\r\n    listing: ListingData[\"listing\"];\r\n}\r\n\r\nconst { Paragraph, Title } = Typography;\r\n\r\nexport const ListingDetails = ({listing}: Props) =>{\r\n    const { title, description, image, type, address, city, numOfGuests, host } = listing;\r\n\r\n    return (\r\n        <div className=\"listing-details\">\r\n            <div style={{ backgroundImage: `url(${image})`}} className=\"listing-details__image\" />\r\n\r\n            <div className=\"listing-details__information\">\r\n                <Paragraph type=\"secondary\" ellipsis className=\"listing-details__city-address\">\r\n                    <Link to={`/listings/${city}`}>\r\n                        <EnvironmentOutlined style={{ color: iconColor }} /> {city}\r\n                    </Link>\r\n                    <Divider type=\"vertical\" />\r\n                    {address}\r\n                </Paragraph>\r\n                <Title level={3} className=\"listing-details__title\">\r\n                    {title}\r\n                </Title>\r\n            </div>\r\n\r\n            <Divider />\r\n\r\n            <div className=\"listing-details__section\">\r\n                <Link to={`/user/${host.id}`}>\r\n                    <Avatar src={host.avatar} size={64} />\r\n                    <Title level={2} className=\"listing-details__host-name\">\r\n                        {host.name}\r\n                    </Title>\r\n                </Link>\r\n            </div>\r\n\r\n            <Divider />\r\n\r\n            <div className=\"listing-details__section\">\r\n                <Title level={4}>About this space</Title>\r\n                <div className=\"listing-details__about-items\">\r\n                    <Tag color=\"magenta\">{type}</Tag>\r\n                    <Tag color=\"magenta\">{numOfGuests} Guests</Tag>\r\n                </div>\r\n                <Paragraph ellipsis={{ rows: 3, expandable: true }}>{description}</Paragraph>\r\n            </div>\r\n        </div>\r\n    );\r\n};","import React, { useState } from 'react';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { LISTING } from '../../lib/graphql/queries';\r\nimport {\r\n    Listing as ListingData,\r\n    ListingVariables\r\n} from '../../lib/graphql/queries/Listing/__generated__/Listing';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport { Col, Layout, Row } from 'antd';\r\nimport { ErrorBanner, PageSkeleton } from '../../lib/components';\r\nimport { ListingBookings, ListingCreateBooking, WrappedListingCreateBookingModal as ListingCreateBookingModal, ListingDetails } from './components';\r\nimport { Moment } from 'moment';\r\nimport { Viewer } from '../../lib/types';\r\n\r\ninterface MatchParams {\r\n    id: string;\r\n}\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst PAGE_LIMIT = 3;\r\n\r\nexport const Listing = ({ viewer, match }: Props & RouteComponentProps<MatchParams>) => {\r\n    const [bookingsPage, setBookingsPage] = useState(1);\r\n    const [checkInDate, setCheckInDate] = useState<Moment | null>(null);\r\n    const [checkOutDate, setCheckOutDate] = useState<Moment | null>(null);\r\n    const [modalVisible, setModalVisible] = useState<boolean>(false);\r\n\r\n    const { loading, data, error, refetch } = useQuery<ListingData, ListingVariables>(LISTING, {\r\n        variables: {\r\n            id: match.params.id,\r\n            bookingsPage,\r\n            limit: PAGE_LIMIT\r\n        }\r\n    });\r\n\r\n    const clearBookingData = () => {\r\n        setModalVisible(false);\r\n        setCheckInDate(null);\r\n        setCheckOutDate(null);\r\n    };\r\n\r\n    const handleListingRefetch = async () => {\r\n        await refetch();\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <Content className=\"listings\">\r\n                <PageSkeleton />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Content className=\"listings\">\r\n                <ErrorBanner description=\"This listing does not exist or we've encountered an error. Please try again soon!\" />\r\n                <PageSkeleton />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    const listing = data ? data.listing : null;\r\n    const listingBookings = listing ? listing.bookings : null;\r\n\r\n    const listingDetailsElement = listing ? <ListingDetails listing={listing} /> : null;\r\n    const listingBookingsElement = listingBookings ? (\r\n        <ListingBookings\r\n            listingBookings={listingBookings}\r\n            bookingsPage={bookingsPage}\r\n            limit={PAGE_LIMIT}\r\n            setBookingsPage={setBookingsPage}\r\n        />\r\n    ) : null;\r\n    const listingCreateBookingElement = listing ? (\r\n        <ListingCreateBooking \r\n            viewer={viewer}\r\n            host={listing.host}\r\n            price={listing.price}\r\n            bookingsIndex={listing.bookingsIndex}\r\n            checkInDate={checkInDate}\r\n            checkOutDate={checkOutDate}\r\n            setCheckInDate={setCheckInDate}\r\n            setCheckOutDate={setCheckOutDate}\r\n            setModalVisible={setModalVisible}\r\n        />\r\n    ) : null;\r\n\r\n    const listingCreateBookingModalElement = listing && checkInDate && checkOutDate ? (\r\n        <ListingCreateBookingModal\r\n            id={listing.id}\r\n            price={listing.price}\r\n            checkInDate={checkInDate}\r\n            checkOutDate={checkOutDate}\r\n            modalVisible={modalVisible}\r\n            setModalVisible={setModalVisible}\r\n            clearBookingData={clearBookingData}\r\n            handleListingRefetch={handleListingRefetch}\r\n        />\r\n    ) : null;\r\n\r\n    return (\r\n        <Content className=\"listings\">\r\n            <Row gutter={24} justify=\"space-between\">\r\n                <Col xs={24} lg={14}>\r\n                    {listingDetailsElement}\r\n                    {listingBookingsElement}\r\n                </Col>\r\n                <Col xs={24} lg={10}>\r\n                    {listingCreateBookingElement}\r\n                </Col>\r\n            </Row>\r\n            {listingCreateBookingModalElement}\r\n        </Content>\r\n    );\r\n}","import React from 'react';\r\nimport { Select } from 'antd';\r\nimport { ListingsFilter } from '../../../../lib/graphql/globalTypes';\r\n\r\ninterface Props {\r\n    filter: ListingsFilter;\r\n    setFilter: (filter: ListingsFilter) => void;\r\n}\r\n\r\nconst { Option } = Select;\r\n\r\nexport const ListingsFilters = ({ filter, setFilter}: Props) => {\r\n    return (\r\n        <div className=\"listings-filters\">\r\n            <Select value={filter} onChange={(filter: ListingsFilter) => setFilter(filter)}>\r\n                <Option value={ListingsFilter.PRICE_LOW_TO_HIGH}>Price: Low to High</Option>\r\n                <Option value={ListingsFilter.PRICE_HIGH_TO_LOW}>Price: High to Low</Option>\r\n            </Select>\r\n        </div>\r\n    );\r\n};","import React from 'react';\r\nimport { Pagination } from 'antd';\r\n\r\ninterface Props {\r\n    total: number;\r\n    page: number;\r\n    limit: number;\r\n    setPage: (page: number) => void;\r\n}\r\n\r\nexport const ListingsPagination = ({ total, page, limit, setPage}: Props) => {\r\n    return (\r\n        <Pagination\r\n            current={page}\r\n            total={total}\r\n            defaultPageSize={limit}\r\n            hideOnSinglePage\r\n            showLessItems\r\n            onChange={(page: number) => setPage(page)}\r\n            className=\"listings-pagination\"\r\n        />\r\n    );\r\n};","import React from \"react\";\r\nimport { Card, List, Skeleton } from \"antd\";\r\n\r\nimport listingLoadingCardCover from \"../../assets/listing-loading-card-cover.png\";\r\n\r\nexport const ListingsSkeleton = () => {\r\n  const emptyData = [{}, {}, {}, {}, {}, {}, {}, {}];\r\n\r\n  return (\r\n    <div className=\"listings-skeleton\">\r\n      <Skeleton paragraph={{ rows: 1 }} />\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          column: 4,\r\n          xs: 1,\r\n          sm: 2,\r\n          lg: 4\r\n        }}\r\n        dataSource={emptyData}\r\n        renderItem={() => (\r\n          <List.Item>\r\n            <Card\r\n              cover={\r\n                <div\r\n                  style={{ backgroundImage: `url(${listingLoadingCardCover})` }}\r\n                  className=\"listings-skeleton__card-cover-img\"\r\n                ></div>\r\n              }\r\n              loading\r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAGsCAYAAACiiX3NAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAABcgSURBVHgB7daxDYAwEARBm9yI/qtEUIARdex8BzuX/BiOAAECBAgQIEAgJzD/4vt5d65cMAECBAgQIEAgKnCdax7RdtkECBAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAAECBAgQIECAAAECBFoCH+giB1TBDI5HAAAAAElFTkSuQmCC\"","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { Affix, Layout, List, Typography } from 'antd';\r\nimport { ErrorBanner, ListingCard } from '../../lib/components';\r\nimport { LISTINGS } from '../../lib/graphql/queries';\r\nimport { Listings as LIstingsData, ListingsVariables } from '../../lib/graphql/queries/Listings/__generated__/Listings';\r\nimport { ListingsFilter } from '../../lib/graphql/globalTypes';\r\nimport { ListingsFilters, ListingsPagination, ListingsSkeleton } from './components';\r\n\r\ninterface MatchParams {\r\n    location: string;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nconst PAGE_LIMIT = 8;\r\n\r\nexport const Listings = ({ match }: RouteComponentProps<MatchParams>) => {\r\n    const locationRef = useRef(match.params.location);\r\n    const [ filter, setFilter ] = useState(ListingsFilter.PRICE_LOW_TO_HIGH);\r\n    const [page, setPage] = useState(1);\r\n\r\n    const { loading, error, data } = useQuery<LIstingsData, ListingsVariables>(LISTINGS, {\r\n        skip: locationRef.current !== match.params.location && page !== 1,\r\n        variables: {\r\n            location: match.params.location,\r\n            filter,\r\n            limit: PAGE_LIMIT,\r\n            page\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        setPage(1);\r\n        locationRef.current = match.params.location;\r\n    }, [match.params.location]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <Content className=\"listings\">\r\n                <ListingsSkeleton />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Content className=\"listings\">\r\n                <ErrorBanner description={`\r\n                    We either couldn't find anything matching your search or have encountered an error.\r\n                    If you're searching for a unique location, try searching again with more common keywords.`\r\n                }/>\r\n                <ListingsSkeleton />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    const listings = data ? data.listings : null;\r\n    const listingsRegion = listings ? listings.region : null;\r\n\r\n    const listinsSectionElement = listings && listings.result.length ? (\r\n        <div>\r\n            <Affix offsetTop={64}>\r\n                <ListingsPagination total={listings.total} page={page} limit={PAGE_LIMIT} setPage={setPage} />\r\n                <ListingsFilters filter={filter} setFilter={setFilter} />\r\n            </Affix>\r\n            <List\r\n                grid={{\r\n                    gutter: 8,\r\n                    column: 4,\r\n                    xs: 1,\r\n                    sm: 2,\r\n                    lg: 4\r\n                }}\r\n                dataSource={listings.result}\r\n                renderItem={listing => (\r\n                    <List.Item>\r\n                        <ListingCard listing={listing} />\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        </div>\r\n    ) : (\r\n        <div>\r\n            <Paragraph>\r\n                It appears that no listings have yet been created for {\"\"}\r\n                <Text mark>\"{listingsRegion}\"</Text>\r\n            </Paragraph>\r\n            <Paragraph>\r\n                Be the first person to <Link to=\"/host\">create a listing in this area</Link>!\r\n            </Paragraph>\r\n        </div>\r\n    );\r\n\r\n    const listingsRegionElement = listingsRegion ? (\r\n        <Title level={3} className=\"listings__title\">\r\n            Results for \"{listingsRegion}\"\r\n        </Title>\r\n    ) : null;\r\n\r\n    return (\r\n    <Content className=\"listings\">\r\n        {listingsRegionElement}\r\n        {listinsSectionElement}\r\n    </Content>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport const NotFound = () => {\r\n    return <h2>NotFound</h2>;\r\n}","import React, { useEffect, useRef } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useApolloClient, useMutation } from \"@apollo/react-hooks\";\r\nimport { Card, Layout, Spin, Typography } from \"antd\";\r\nimport { ErrorBanner } from \"../../lib/components\";\r\nimport { LOG_IN } from \"../../lib/graphql/mutations\";\r\nimport { AUTH_URL } from \"../../lib/graphql/queries\";\r\nimport {\r\n  LogIn as LogInData,\r\n  LogInVariables\r\n} from \"../../lib/graphql/mutations/LogIn/__generated__/LogIn\";\r\nimport { AuthUrl as AuthUrlData } from \"../../lib/graphql/queries/AuthUrl/__generated__/AuthUrl\";\r\nimport { displaySuccessNotification, displayErrorMessage } from \"../../lib/utils\";\r\nimport { Viewer } from \"../../lib/types\";\r\n\r\n// Image Assets\r\nimport googleLogo from \"./assets/google_logo.png\";\r\n\r\ninterface Props {\r\n  setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst { Text, Title } = Typography;\r\n\r\nexport const Login = ({ setViewer }: Props) => {\r\n  const client = useApolloClient();\r\n  const [\r\n    logIn,\r\n    { data: logInData, loading: logInLoading, error: logInError }\r\n  ] = useMutation<LogInData, LogInVariables>(LOG_IN, {\r\n    onCompleted: data => {\r\n      if (data && data.logIn && data.logIn.token) {\r\n        setViewer(data.logIn);\r\n        sessionStorage.setItem(\"token\", data.logIn.token);\r\n        displaySuccessNotification(\"You've successfully logged in!\");\r\n      }\r\n    }\r\n  });\r\n  const logInRef = useRef(logIn);\r\n\r\n  useEffect(() => {\r\n    const code = new URL(window.location.href).searchParams.get(\"code\");\r\n    if (code) {\r\n      logInRef.current({\r\n        variables: {\r\n          input: { code }\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const handleAuthorize = async () => {\r\n    try {\r\n      const { data } = await client.query<AuthUrlData>({\r\n        query: AUTH_URL\r\n      });\r\n      window.location.href = data.authUrl;\r\n    } catch {\r\n      displayErrorMessage(\r\n        \"Sorry! We weren't able to log you in. Please try again later!\"\r\n      );\r\n    }\r\n  };\r\n\r\n  if (logInLoading) {\r\n    return (\r\n      <Content className=\"log-in\">\r\n        <Spin size=\"large\" tip=\"Logging you in...\" />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  if (logInData && logInData.logIn) {\r\n    const { id: viewerId } = logInData.logIn;\r\n    return <Redirect to={`/user/${viewerId}`} />;\r\n  }\r\n\r\n  const logInErrorBannerElement = logInError ? (\r\n    <ErrorBanner description=\"Sorry! We weren't able to log you in. Please try again later!\" />\r\n  ) : null;\r\n\r\n  return (\r\n    <Content className=\"log-in\">\r\n      {logInErrorBannerElement}\r\n      <Card className=\"log-in-card\">\r\n        <div className=\"log-in-card__intro\">\r\n          <Title level={3} className=\"log-in-card__intro-title\">\r\n            <span role=\"img\" aria-label=\"wave\">\r\n              \r\n            </span>\r\n          </Title>\r\n          <Title level={3} className=\"log-in-card__intro-title\">\r\n            Log in to TinyHouse!\r\n          </Title>\r\n          <Text>Sign in with Google to start booking available rentals!</Text>\r\n        </div>\r\n        <button className=\"log-in-card__google-button\" onClick={handleAuthorize}>\r\n          <img\r\n            src={googleLogo}\r\n            alt=\"Google Logo\"\r\n            className=\"log-in-card__google-button-logo\"\r\n          />\r\n          <span className=\"log-in-card__google-button-text\">Sign in with Google</span>\r\n        </button>\r\n        <Text type=\"secondary\">\r\n          Note: By signing in, you'll be redirected to the Google consent form to sign in\r\n          with your Google account.\r\n        </Text>\r\n      </Card>\r\n    </Content>\r\n  );\r\n};\r\n","export default \"data:image/png;base64,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\"","import React, { useEffect, useRef } from 'react';\r\nimport { Redirect, RouteComponentProps } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { Layout, Spin } from 'antd';\r\nimport { CONNECT_STRIPE } from '../../lib/graphql/mutations';\r\nimport {\r\n    ConnectStripe as ConnectStripeData,\r\n    ConnectStripeVariables\r\n} from '../../lib/graphql/mutations/ConnectStripe/__generated__/ConnectStripe';\r\nimport { Viewer } from '../../lib/types';\r\nimport { displaySuccessNotification } from '../../lib/utils';\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n    setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\nconst { Content } = Layout;\r\n\r\nexport const Stripe = ({ viewer, setViewer, history }: Props & RouteComponentProps) => {\r\n    const [connectStripe, { data, loading, error }] = useMutation<ConnectStripeData, ConnectStripeVariables>(CONNECT_STRIPE, {\r\n        onCompleted: data => {\r\n            if (data && data.connectStripe) {\r\n                setViewer({ ...viewer, hasWallet: data.connectStripe.hasWallet });\r\n                displaySuccessNotification(\r\n                    \"You've successfully connected your Stripe Account!\", \r\n                    \"You can now begin to create listings in the Host page.\" \r\n                );\r\n            }\r\n        }\r\n    });\r\n    const connectStripeRef = useRef(connectStripe);\r\n\r\n    useEffect(() => {\r\n        const code = new URL(window.location.href).searchParams.get(\"code\");\r\n\r\n        if (code) {\r\n            connectStripeRef.current({\r\n                variables: {\r\n                    input: {code}\r\n                }\r\n            });\r\n        } else {\r\n            history.replace(\"/login\");\r\n        }\r\n    }, [history]);\r\n\r\n    if (data && data.connectStripe) {\r\n        return <Redirect to={`/user/${viewer.id}`} />;\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <Content className=\"stripe\">\r\n                <Spin size=\"large\" tip=\"Connecting your Stripe account...\" />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return <Redirect to={`/user/${viewer.id}?stripe_error=true`} />;\r\n    }\r\n\r\n    return null;\r\n};","import React from 'react';\r\nimport { List, Typography } from 'antd';\r\nimport { ListingCard } from '../../../../lib/components/ListingCard';\r\nimport { User } from '../../../../lib/graphql/queries/User/__generated__/User';\r\n\r\ninterface Props {\r\n    userBookings: User[\"user\"][\"bookings\"];\r\n    bookingsPage: number;\r\n    limit: number;\r\n    setBookingsPage: (page: number) => void;\r\n}\r\n\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nexport const UserBookings = ({\r\n    userBookings, \r\n    bookingsPage, \r\n    limit, \r\n    setBookingsPage\r\n}: Props) => {\r\n    const total = userBookings ? userBookings.total : null;\r\n    const result = userBookings ? userBookings.result : null;\r\n\r\n    const userBookingsList = userBookings ? (\r\n        <List\r\n          grid={{\r\n            gutter: 8,\r\n            xs: 1,\r\n            sm: 2,\r\n            lg: 4\r\n          }}\r\n          dataSource={result ? result : undefined}\r\n          locale={{ emptyText: \"You haven't made any bookings yet!\" }}\r\n          pagination={{\r\n            position: \"top\",\r\n            current: bookingsPage,\r\n            total: total ? total : undefined,\r\n            defaultPageSize: limit,\r\n            hideOnSinglePage: true,\r\n            showLessItems: true,\r\n            onChange: (page: number) => setBookingsPage(page)\r\n          }}\r\n          renderItem={userBooking => {\r\n              const bookingHistory = (\r\n                <div className=\"user-bookings__booking-history\">\r\n                    <div>\r\n                        Check in: <Text strong>{userBooking.checkIn}</Text>\r\n                    </div>\r\n                    <div>\r\n                        Check out: <Text strong>{userBooking.checkOut}</Text>\r\n                    </div>\r\n                </div>\r\n              );\r\n\r\n            return (\r\n                <List.Item>\r\n                    {bookingHistory}\r\n                    <ListingCard listing={userBooking.listing} />\r\n                </List.Item>\r\n            );\r\n            \r\n          }}\r\n        />\r\n    ) : null;\r\n\r\n    const userBookingsElement = userBookingsList ? (\r\n        <div className=\"user-bookings\">\r\n            <Title level={4} className=\"user-bookings__title\">\r\n                Bookings\r\n            </Title>\r\n            <Paragraph className=\"user-bookings__description\">\r\n                This section highlights the bookings you've made and the check-in/check-out dates associated with said bookings.\r\n            </Paragraph>\r\n            {userBookingsList}\r\n        </div>\r\n    ) : null;\r\n\r\n    return userBookingsElement;\r\n};","import React from 'react';\r\nimport { List, Typography } from 'antd';\r\nimport { ListingCard } from '../../../../lib/components/ListingCard';\r\nimport { User } from '../../../../lib/graphql/queries/User/__generated__/User';\r\n\r\ninterface Props {\r\n    userListings: User[\"user\"][\"listings\"];\r\n    listingsPage: number;\r\n    limit: number;\r\n    setListingsPage: (page: number) => void;\r\n}\r\n\r\nconst { Paragraph, Title } = Typography;\r\n\r\nexport const UserListings = ({\r\n    userListings, \r\n    listingsPage, \r\n    limit, \r\n    setListingsPage\r\n}: Props) => {\r\n    const { total, result } = userListings;\r\n\r\n    const userListingsList = (\r\n        <List\r\n          grid={{\r\n            gutter: 8,\r\n            xs: 1,\r\n            sm: 2,\r\n            lg: 4\r\n          }}\r\n          dataSource={result}\r\n          locale={{ emptyText: \"User doesn't have any listings yet!\" }}\r\n          pagination={{\r\n            position: \"top\",\r\n            current: listingsPage,\r\n            total,\r\n            defaultPageSize: limit,\r\n            hideOnSinglePage: true,\r\n            showLessItems: true,\r\n            onChange: (page: number) => setListingsPage(page)\r\n          }}\r\n          renderItem={userListing => (\r\n            <List.Item>\r\n              <ListingCard listing={userListing} />\r\n            </List.Item>\r\n          )}\r\n        />\r\n    );\r\n\r\n    return (\r\n      <div className=\"user-listings\">\r\n        <Title level={4} className=\"user-listings__title\">\r\n          Listings\r\n        </Title>\r\n        <Paragraph className=\"user-listings__description\">\r\n          This section highlights the listings this user currently hosts and has made available for bookings.\r\n        </Paragraph>\r\n        {userListingsList}\r\n      </div>\r\n    );\r\n};","import React, { Fragment } from 'react';\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { Avatar, Button, Card, Divider, Tag, Typography } from 'antd';\r\nimport { displayErrorMessage, displaySuccessNotification, formatListingPrice } from '../../../../lib/utils';\r\nimport { DISCONNECT_STRIPE } from '../../../../lib/graphql/mutations';\r\nimport { DisconnectStripe as DisconnectStripeData } from '../../../../lib/graphql/mutations/DisconnectStripe/__generated__/DisconnectStripe';\r\nimport { User as UserData } from '../../../../lib/graphql/queries/User/__generated__/User';\r\nimport { Viewer } from '../../../../lib/types';\r\n\r\ninterface Props {\r\n    user: UserData['user'];\r\n    viewer: Viewer;\r\n    viewerIsUser: boolean;\r\n    setViewer: (viewer: Viewer) => void;\r\n    handleUserRefetch: () => Promise<void>;\r\n}\r\n\r\nconst stripeAuthUrl = `https://dashboard.stripe.com/oauth/v2/authorize?response_type=code&client_id=${process.env.REACT_APP_S_CLIENT_ID}&scope=read_write`;\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nexport const UserProfile = ({user, viewer, viewerIsUser, setViewer, handleUserRefetch}: Props) => {\r\n  const [disconnectStripe, { loading }] = useMutation<DisconnectStripeData>(\r\n    DISCONNECT_STRIPE, {\r\n      onCompleted: data => {\r\n        if (data && data.disconnectStripe) {\r\n          setViewer({ ...viewer, hasWallet: data.disconnectStripe.hasWallet });\r\n          displaySuccessNotification(\r\n            \"You've successfully disconnected from Stripe!\",\r\n            \"You'll have to reconnect with Stripe to continue to create listings.\"\r\n          );\r\n          handleUserRefetch();\r\n        }\r\n      },\r\n      onError: () => {\r\n        displayErrorMessage(\r\n          \"Sorry! We weren't able to disconnect you from Stripe. Please try again later!\"\r\n        );\r\n      }\r\n    }\r\n  );\r\n\r\n  const redirectToStripe = () => {\r\n    window.location.href = stripeAuthUrl;\r\n  };\r\n\r\n  const additionalDetails = user.hasWallet ? \r\n    (\r\n      <Fragment>\r\n        <Paragraph>\r\n          <Tag color=\"green\">Stripe Registered</Tag>\r\n        </Paragraph>\r\n        <Paragraph>\r\n          Income Earned:{\" \"}\r\n          <Text strong>{user.income ? formatListingPrice(user.income) : \"$0\"}</Text>\r\n        </Paragraph>\r\n        <Button type=\"primary\" className=\"user-profile__details-cta\" loading={loading} onClick={() => disconnectStripe()}>\r\n          Disconnect Stripe\r\n        </Button>\r\n        <Paragraph type=\"secondary\">\r\n          By disconnecting, you won't be able to receive{\" \"}\r\n          <Text strong>any further payments</Text>. This will prevent users from booking listings that you might have already created.\r\n        </Paragraph>\r\n      </Fragment>\r\n    ) : (\r\n      <Fragment>\r\n        <Paragraph>\r\n          Interested in becoming a TinyHouse host? Register with your Stripe account!\r\n        </Paragraph>\r\n        <Button type=\"primary\" className=\"user-profile__details-cta\" onClick={redirectToStripe}>\r\n          Connect with Stripe!\r\n        </Button>\r\n        <Paragraph type=\"secondary\">\r\n          TinyHouse uses{\" \"}\r\n          <a\r\n            href=\"https://stripe.com/en-US/connect\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Stripe\r\n          </a>{\" \"}\r\n          to help transfer your earnings in a secure and trusted manner.\r\n        </Paragraph>\r\n      </Fragment>\r\n  );\r\n  \r\n  const additionalDetailsSection = viewerIsUser ? (\r\n      <Fragment>\r\n        <Divider />\r\n        <div className=\"user-profile__details\">\r\n          <Title level={4}>Additional Details</Title>\r\n          {additionalDetails}\r\n        </div>\r\n      </Fragment>\r\n    ) : null;\r\n\r\n  return (\r\n      <div className=\"user-profile\">\r\n          <Card className=\"user-profile__card\">\r\n              <div className=\"user-profile__avatar\">\r\n                  <Avatar size={100} src={user.avatar} />\r\n              </div>\r\n              <Divider />\r\n              <div className=\"user-profile__details\">\r\n                  <Title level={4}>Details</Title>\r\n                  <Paragraph>\r\n                      Name: <Text strong>{user.name}</Text>\r\n                  </Paragraph>\r\n                  <Paragraph>\r\n                      Contact: <Text strong>{user.contact}</Text>\r\n                  </Paragraph>\r\n              </div>\r\n              {additionalDetailsSection}\r\n          </Card>\r\n      </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport { USER } from '../../lib/graphql/queries';\r\nimport { User as UserData, UserVariables } from '../../lib/graphql/queries/User/__generated__/User';\r\nimport { Viewer } from '../../lib/types';\r\nimport { UserBookings, UserListings, UserProfile } from './components';\r\nimport { Col, Layout, Row } from 'antd';\r\nimport { ErrorBanner, PageSkeleton } from '../../lib/components';\r\n\r\ninterface Props {\r\n    viewer: Viewer;\r\n    setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\ninterface MatchParams {\r\n    id: string;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst PAGE_LIMIT = 4;\r\n\r\nexport const User = ({ viewer, setViewer, match }: Props & RouteComponentProps<MatchParams>) => {\r\n    const [listingsPage, setListingsPage] = useState(1);\r\n    const [bookingsPage, setBookingsPage] = useState(1);\r\n\r\n    const { data, loading, error, refetch } = useQuery<UserData, UserVariables>(USER, {\r\n        variables: {\r\n            id: match.params.id,\r\n            bookingsPage,\r\n            listingsPage,\r\n            limit: PAGE_LIMIT\r\n        }\r\n    });\r\n\r\n    const handleUserRefetch = async () => {\r\n        await refetch();\r\n    };\r\n\r\n    const stripeError = new URL(window.location.href).searchParams.get(\"stripe_error\");\r\n    const stripeErrorBanner = stripeError ? (\r\n        <ErrorBanner description=\"We had an issue connecting to Stripe. Please try again soon.\" />\r\n    ) : null;\r\n\r\n    if (loading) {\r\n        return (\r\n            <Content className=\"user\">\r\n                <PageSkeleton />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Content className=\"user\">\r\n                <ErrorBanner description=\"This user may not exist or we've encountered an error. Please try again soon.\" />\r\n                <PageSkeleton />\r\n            </Content>\r\n        );\r\n    }\r\n\r\n    const user = data ? data.user : null;\r\n    const viewerIsUser = viewer.id === match.params.id;\r\n\r\n    const userListings = user ? user.listings : null;\r\n    const userBookings = user ? user.bookings : null;\r\n\r\n    const userProfileElement = user ? (\r\n        <UserProfile \r\n            user={user} \r\n            viewerIsUser={viewerIsUser} \r\n            viewer={viewer} \r\n            setViewer={setViewer}\r\n            handleUserRefetch={handleUserRefetch}\r\n        />\r\n    ) : null;\r\n\r\n    const userListingsElement = userListings ? (\r\n        <UserListings\r\n            userListings={userListings}\r\n            listingsPage={listingsPage}\r\n            limit={PAGE_LIMIT}\r\n            setListingsPage={setListingsPage}\r\n        />\r\n    ) : null;\r\n\r\n    const userBookingsElement = userBookings ? (\r\n        <UserBookings\r\n            userBookings={userBookings}\r\n            bookingsPage={bookingsPage}\r\n            limit={PAGE_LIMIT}\r\n            setBookingsPage={setBookingsPage}\r\n        />\r\n    ) : null;\r\n    \r\n    return (\r\n        <Content className=\"user\">\r\n            {stripeErrorBanner}\r\n            <Row gutter={12} typeof=\"flex\" justify=\"space-between\">\r\n                <Col xs={24}>{userProfileElement}</Col>\r\n                <Col xs={24}>\r\n                    {userListingsElement}\r\n                    {userBookingsElement}\r\n                </Col>\r\n            </Row>\r\n        </Content>\r\n    );\r\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { render } from 'react-dom';\nimport ApolloClient from 'apollo-boost';\nimport { ApolloProvider, useMutation } from 'react-apollo';\nimport { StripeProvider, Elements } from 'react-stripe-elements';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { \n  AppHeader, \n  Home, \n  Host, \n  Listing, \n  Listings, \n  Login, \n  NotFound, \n  Stripe,\n  User \n} from './sections';\nimport { AppHeaderSkeleton, ErrorBanner } from './lib/components';\nimport { LOG_IN } from './lib/graphql/mutations/LogIn';\nimport { LogIn as LogInData, LogInVariables } from './lib/graphql/mutations/LogIn/__generated__/LogIn'; \nimport { Viewer } from './lib/types'\nimport reportWebVitals from './reportWebVitals';\nimport './styles/index.css';\nimport { Affix, Layout, Spin } from 'antd';\n\n\nconst client = new ApolloClient({\n  uri: '/api',\n  request: async operation => {\n    const token = sessionStorage.getItem('token');\n    operation.setContext({\n      headers: {\n        \"X-CSRF-TOKEN\": token || \"\"\n      }\n    });\n  }\n});\n\nconst initialViewer: Viewer = {\n  id: null,\n  token: null,\n  avatar: null,\n  hasWallet: null,\n  didRequest: false\n}\n\nconst App = () => {\n  const [viewer, setViewer] = useState<Viewer>(initialViewer);\n  const [logIn, { error }] = useMutation<LogInData, LogInVariables>(LOG_IN, {\n    onCompleted: data => {\n      if (data && data.logIn) {\n        setViewer(data.logIn);\n\n        if (data.logIn.token) {\n          sessionStorage.setItem(\"token\", data.logIn.token);\n        } else {\n          sessionStorage.removeItem(\"token\");\n        }\n      }\n    }\n  });\n  const logInRef = useRef(logIn);\n\n  useEffect(() => {\n    logInRef.current();\n  }, []);\n\n  if (!viewer.didRequest && !error) {\n    return (\n      <Layout className=\"app-skeleton\">\n        <AppHeaderSkeleton />\n        <div className=\"app-skeleton__spin-section\">\n          <Spin size=\"large\" tip=\"Loading Tinyhouse\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  const logInErrorBannerElement = error ? (\n    <ErrorBanner description=\"We weren't able to verify if you were logged in. Please try again later!\" />\n  ) : null;\n  \n  return (\n    <StripeProvider apiKey={process.env.REACT_APP_S_PUBLISHABLE_KEY as string}>\n      <Router>\n        <Layout id=\"app\">\n          {logInErrorBannerElement}\n          <Affix offsetTop={0} className=\"app__affix-header\">\n            <AppHeader viewer={viewer} setViewer={setViewer} />\n          </Affix>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/host\" render={props => <Host {...props} viewer={viewer} />} />\n            <Route exact path=\"/listing/:id\" render={props => <Elements><Listing {...props} viewer={viewer} /></Elements>} />\n            <Route exact path=\"/listings/:location?\" component={Listings} />\n            <Route exact path=\"/login\" render={props => <Login {...props} setViewer={setViewer} />} />\n            <Route exact path=\"/stripe\" render={props => <Stripe {...props} viewer={viewer} setViewer={setViewer} />} />\n            <Route exact path=\"/user/:id\" render={props => <User {...props} viewer={viewer} setViewer={setViewer} />} />\n            <Route component={NotFound} />\n          </Switch>\n        </Layout>\n      </Router>\n    </StripeProvider>\n  );\n}\n\nrender(\n  <ApolloProvider client={client}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </ApolloProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}